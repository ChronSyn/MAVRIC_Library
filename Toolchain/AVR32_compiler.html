<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>AVR32 compiler - MAV'RIC Library</title>
    <meta name="description" content="Highway to the Danger Zone" />
    <meta name="author" content="MAV'RIC Team">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-navy.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/theme-navy.min.css' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
    <a href="https://github.com/lis-epfl/MAVRIC_Library" target="_blank" id="github-ribbon" class="hidden-print"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../index.html">MAV'RIC Library</a>
        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=''><a href="../Getting_Started.html">Getting Started</a></li><li class=''><a href="../User_Guide/index.html" class="folder">User Guide</a><ul class='nav nav-list'></ul></li><li class='open'><a href="../Toolchain/index.html" class="folder">Toolchain</a><ul class='nav nav-list'><li class='active'><a href="../Toolchain/AVR32_compiler.html">AVR32 compiler</a></li><li class=''><a href="../Toolchain/AVR32_Bootloader.html">AVR32 Bootloader</a></li><li class=''><a href="../Toolchain/AVR32_DFU_Programming.html">AVR32 DFU Programming</a></li><li class=''><a href="../Toolchain/STM32.html">STM32</a></li><li class=''><a href="../Toolchain/Emulation.html">Emulation</a></li><li class=''><a href="../Toolchain/Test_Toolchains.html">Test Toolchains</a></li></ul></li><li class=''><a href="../Developper_Guide/index.html" class="folder">Developper Guide</a><ul class='nav nav-list'><li class=''><a href="../Developper_Guide/Create_New_Telemetry_Messages.html">Create New Telemetry Messages</a></li><li class=''><a href="../Developper_Guide/Data_Logging.html">Data Logging</a></li><li class=''><a href="../Developper_Guide/Code_style.html">Code style</a></li></ul></li><li class=''><a href="#" class="aj-nav folder">Contributing</a><ul class='nav nav-list'><li class=''><a href="../Contributing/Contribute_to_the_Documentation.html">Contribute to the Documentation</a></li><li class=''><a href="../Contributing/Development_Workflow.html">Development Workflow</a></li></ul></li><li class=''><a href="#" class="aj-nav folder">Module Description</a><ul class='nav nav-list'><li class=''><a href="../Module_Description/Ahrs_ekf.html">Ahrs ekf</a></li></ul></li><li class=''><a href="#" class="aj-nav folder">Pages From Wiki</a><ul class='nav nav-list'><li class=''><a href="../Pages_From_Wiki/Calibration-Bias-Factors.html">Calibration-Bias-Factors</a></li><li class=''><a href="../Pages_From_Wiki/Calibration-Scale-Factors.html">Calibration-Scale-Factors</a></li><li class=''><a href="../Pages_From_Wiki/Connect-a-Joystick-to-QGroundControl.html">Connect-a-Joystick-to-QGroundControl</a></li><li class=''><a href="../Pages_From_Wiki/Debug-via-minicom-software-on-Linux.html">Debug-via-minicom-software-on-Linux</a></li><li class=''><a href="../Pages_From_Wiki/Download-Firmware.html">Download-Firmware</a></li><li class=''><a href="../Pages_From_Wiki/Download-Git-Tools.html">Download-Git-Tools</a></li><li class=''><a href="../Pages_From_Wiki/Download-IDE.html">Download-IDE</a></li><li class=''><a href="../Pages_From_Wiki/Download-QGroundcontrol.html">Download-QGroundcontrol</a></li><li class=''><a href="../Pages_From_Wiki/Electronic-board.html">Electronic-board</a></li><li class=''><a href="../Pages_From_Wiki/FAQ.html">FAQ</a></li><li class=''><a href="../Pages_From_Wiki/First-Steps-Binding-your-Remote.html">First-Steps-Binding-your-Remote</a></li><li class=''><a href="../Pages_From_Wiki/First-steps-CDC-and-DFU-Drivers-issue-on-Windows.html">First-steps-CDC-and-DFU-Drivers-issue-on-Windows</a></li><li class=''><a href="../Pages_From_Wiki/First-steps-Connect-to-QGroundControl.html">First-steps-Connect-to-QGroundControl</a></li><li class=''><a href="../Pages_From_Wiki/First-steps-pairing-XBee-modules.html">First-steps-pairing-XBee-modules</a></li><li class=''><a href="../Pages_From_Wiki/Flashing-a-microcontroller-for-the-first-time.html">Flashing-a-microcontroller-for-the-first-time</a></li><li class=''><a href="../Pages_From_Wiki/Home.html">Home</a></li><li class=''><a href="../Pages_From_Wiki/Quad-Assembly-Building-Steps.html">Quad-Assembly-Building-Steps</a></li><li class=''><a href="../Pages_From_Wiki/Quad-Assembly-Part-List.html">Quad-Assembly-Part-List</a></li><li class=''><a href="../Pages_From_Wiki/Quad-Assembly-Remote-Pairing.html">Quad-Assembly-Remote-Pairing</a></li><li class=''><a href="../Pages_From_Wiki/Remote-settings.html">Remote-settings</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="https://github.com/lis-epfl/MAVRIC_Library/archive/master.zip" target="_blank">Download</a><br><a href="https://github.com/lis-epfl/MAVRIC_Library" target="_blank">GitHub Repo</a><br><a href="https://github.com/lis-epfl/MAVRIC_Library/issues" target="_blank">Help/Support/Bugs</a><br><a href="http://lis-epfl.github.io/MAVRIC_Library/doxygen/classes.html" target="_blank">Doxygen Documentation</a><br>
                        <!-- Twitter -->
                        
                        <hr/>
                    
                    <p><small>Documentation generated by <a href="http://daux.io">Daux.io</a></small></p>
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">
            <div class="content-page">
                <article>
            <div class="page-header sub-header clearfix">
            <h1><a href="../Toolchain/index.html">Toolchain</a> <i class="glyphicon glyphicon-chevron-right"></i> <a href="../Toolchain/AVR32_compiler.html">AVR32 compiler</a>            </h1>
                    <span style="float: left; font-size: 10px; color: gray;">
                        Friday, September 16, 2016                    </span>
                    <span style="float: right; font-size: 10px; color: gray;">
                        5:28 PM                    </span>
        </div>
    
    <h1>Linux</h1>
<p>The avr32-gcc toolchain can be compiled from source. Alternatively, a pre-compiled version is available on Atmel's servers, however it does not work on all linux versions:</p>
<ul>
<li>ubuntu 14.04: OK</li>
<li>archlinux : does not work as of 23/02/2016</li>
</ul>
<h2>From source</h2>
<p>Follow the instructions in the repository <a href="https://github.com/lis-epfl/avr32-toolchain">lis-epfl/avr32-toolchain</a> to compile the toolchain from source.</p>
<h2>Pre-compiled toolchain</h2>
<ul>
<li>
<p>get the Atmel headers</p>
</li>
<li>
<p>go to the Utilities folder of the MAV'RIC folder. Enter the Atmel headers folder or</p>
</li>
<li>
<p>download  <code>avr32-gnu-toolchain-3.4.2.435-linux.any.x86.tar.gz</code> and <code>atmel-headers-6.1.3.1475.zip</code> from Atmel's website (or the more current version if available). We assume the files are in <code>~/Downloads/</code></p>
</li>
<li>
<p>unpack the toolchain:</p>
<pre><code>  cd ~/Downloads
  tar xvfz avr32-gnu-toolchain-3.4.2.435-linux.any.x86.tar.gz
  sudo mv avr32-gnu-toolchain-linux_x86 /usr/local
</code></pre>
</li>
<li>
<p>install headers: the zip file is located in the repository in Code/Library/Atmel_headers folder.</p>
<pre><code>  unzip atmel-headers-6.1.3.1475.zip
  sudo mv atmel-headers-6.1.3.1475/* /usr/local/avr32-gnu-toolchain-linux_x86/avr32/include
  rmdir atmel-headers-6.1.3.1475
</code></pre>
</li>
<li>
<p>create symbolic links in /usr/local/bin:</p>
<pre><code>  sudo ln -s /usr/local/avr32-gnu-toolchain-linux_x86/bin/avr32* /usr/local/bin
</code></pre>
</li>
</ul>
<p>Now avr32-gcc should be available. Try <code>avr32-gcc -v</code> to verify.</p>
<h4>Note: alternatively, the toolchain can be compiled from sources</h4>
<!-- ###################################################################### -->
<hr />
<h1>Mac OS</h1>
<p>Follow the instructions in the repository <a href="https://github.com/denravonska/avr32-toolchain">lis-epfl/avr32-toolchain</a> to compile the toolchain from source.</p>
<!-- ###################################################################### -->
<hr />
<h1>Windows</h1>
<p>It is possible to build AVR32 project on Windows. There are two ways of doing it.</p>
<ol>
<li>
<a href="https://www.cygwin.com/">Cygwin</a> (alone or with a IDE of your choice)</li>
<li>
<a href="http://www.atmel.com/tools/ATMELSTUDIO.aspx">Atmel Studio</a>
</li>
</ol>
<p>It is highly recommended to use the first method. The method 1 uses the same Makefile as linux and MAC OS users, thus is better suited for development with collaborators.
The method 2) uses a .cproj file, which is independent from our Makefiles, and works only with Atmel Studio.</p>
<p>But in any case, to install the bootloader into the Megafly board, Atmel Studio must be used.</p>
<h2>Cygwin</h2>
<ul>
<li>Download <a href="https://www.cygwin.com/">Cygwin</a>.</li>
</ul>
<p>Be sure to have the following packages included:</p>
<ul>
<li>Devel / &quot;binutils&quot;</li>
<li>Devel / &quot;gcc-g++&quot; &amp; &quot;gcc-core&quot;</li>
<li>Devel / &quot;make&quot;</li>
</ul>
<p>The Makefile will call 'avr32-g++' or 'avr32-gcc' to compile. These functions must be made global in windows to be called.</p>
<ul>
<li>Add the link 'C:\Program Files (x86)\Atmel\Atmel Toolchain\AVR32 GCC\Native\3.4.2.435\avr32-gnu-toolchain\bin' into your Environment Variables. This link depends on your installation folder.</li>
</ul>
<h3>Compile using command line in Cygwin</h3>
<p>Now you can compile using Cygwin.</p>
<ul>
<li>Open Cygwin</li>
<li>Write 'cd /cygdrive/C' to go to your hard drive 'C:' if your Makefile is there.</li>
<li>Go to your Makefile folder using 'cd'</li>
<li>type 'make'. It should produce your .hex file.</li>
</ul>
<h3>Compile using Eclipse</h3>
<ul>
<li>Download <a href="http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/marsr">Eclipse</a>
</li>
</ul>
<ul>
<li>In Eclipse, click 'file'-&gt;'New -&gt; 'Makefile Project with existing code' and select the folder where the code is in.</li>
<li>Add the link 'C:/Program Files/cygwin64/bin' into your Environment Variables (path). This link depends on your installation folder of Cygwin.</li>
<li>Go to 'Project'-&gt;'Properties'-&gt;'C/C++ build' -&gt; Builder Settings</li>
<li>Uncheck &quot;Use default build command&quot;</li>
<li>In &quot;Build Command&quot; write: 'make -j8 -C path_to_the_Makefile'</li>
<li>Go to 'Project'-&gt;'Properties'-&gt;'C/C++ build' -&gt; Behavior</li>
<li>In &quot;Clean&quot; write : 'clean -C path_to_the_Makefile'</li>
</ul>
<p>'path_to_the_Makefile' must be the link to your Makefile.</p>
<p>To add a shortcut to flash the board, do the following. But you should have your .bat file which run the flashing automatically.</p>
<ul>
<li>Go to 'Run' -&gt; 'External tools' -&gt; 'External Tools Configurations'</li>
<li>In the &quot;Main&quot; -&gt; &quot;Location&quot; panel paste the link to the .bat file including it</li>
<li>In the &quot;Main&quot; -&gt; &quot;Working Directory&quot; base the link to the .bat file without including it</li>
<li>In the &quot;Build&quot; uncheck build before launch.</li>
</ul>
<h3>Compile using Sublime Text</h3>
<ul>
<li>
<p>Download <a href="http://www.sublimetext.com/">Sublime</a></p>
</li>
<li>
<p>Add the link 'C:/Program Files/cygwin64/bin' into your Environment Variables (path). This link depends on your installation folder of Cygwin.</p>
</li>
<li>
<p>Go to &quot;Tools&quot;-&gt;&quot;Build Systems&quot;-&gt;&quot;New Build System...&quot;</p>
</li>
<li>
<p>Paste this text in the file
```
{
&quot;working_dir&quot;: &quot;${project_path:${folder:${file_path}}}&quot;,
&quot;cmd&quot;: [&quot;make&quot;,&quot;-j8&quot;,&quot;-C&quot;,&quot;D:/_windows/_github_doc/symbiotic/leproto1&quot;],</p>
<pre><code>  &quot;variants&quot;:
      [
        {
          &quot;name&quot;: &quot;Clean&quot;,
          &quot;cmd&quot;: [&quot;make&quot;,&quot;clean&quot;,&quot;-C&quot;,&quot;D:/_windows/_github_doc/symbiotic/leproto1&quot;]
        },
      ]
  }
  ```
</code></pre>
</li>
</ul>
<p>'D:/_windows/_github_doc/symbiotic/leproto1' must be the link to your Makefile.</p>
<ul>
<li>
<p>Save the file where Sublime propose automatically (the name is not important, just remember it to further modify it, in my case: 'C:\Users\lis\AppData\Roaming\Sublime Text 3\Packages\User')</p>
</li>
<li>
<p>Go to &quot;Tools&quot;-&gt;&quot;Build Systems&quot; and select &quot;YOUR_SYSTEM_BUILD&quot;</p>
</li>
<li>
<p>To setup a shortcut for &quot;clean&quot; and &quot;rebuild&quot; options</p>
</li>
<li>
<p>Go to &quot;Preferences&quot;-&gt;&quot;Key Bindings - User&quot;</p>
</li>
<li>
<p>Paste this text in the opened file</p>
<pre><code> [
     { &quot;keys&quot;: [&quot;ctrl+shift+b&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: {&quot;overlay&quot;: &quot;command_palette&quot;, &quot;text&quot;: &quot;Build: &quot;} }
 ]
</code></pre>
</li>
<li>
<p>To add a shortcut to flash the board add the following code after the command &quot;clean&quot;. It will launch the .bat file which must be here in your current folder</p>
<pre><code>  {
    &quot;name&quot;: &quot;Flash&quot;,
    &quot;cmd&quot;: [&quot;dfu-programming.bat&quot;]
  }
</code></pre>
</li>
<li>
<p>Save and close the file</p>
</li>
<li>
<p>To compile the code: click on ctrl+b</p>
</li>
<li>
<p>To clean the code: click on ctrl+shift+b and select &quot;Build: Clean&quot;</p>
</li>
</ul>
<h2>Atmel Studio</h2>
<p>You will need to download <a href="http://www.atmel.com/tools/ATMELSTUDIO.aspx">Atmel Studio</a>.
The installation of Atmel Studio will install the toolchain required to compile the code for the AVR32 microcontroller (mainly here: C:\Program Files (x86)\Atmel\Atmel Toolchain).</p>
<p>The code edition and the compiling can be both made from Atmel Studio. For this, open the .cproj file in Atmel Studio. This file is the 'Makefile' for Atmel Studio. This file contains the choice of the compilator and all the dependences. You can download is from github as well as all the code. If it doesn't exist you need to create through Atmel Studio wizard. For that, Click 'File'-&gt;'New'-&gt;'Project' and follow the instructions.</p>

        <nav>
        <ul class="pager">
            <li><a href="../Toolchain/index.html">Previous</a></li>            <li><a href="../Toolchain/AVR32_Bootloader.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    

    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>
    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>
</body>
</html>
